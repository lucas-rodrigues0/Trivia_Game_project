(this.webpackJsonptrivia_game_project=this.webpackJsonptrivia_game_project||[]).push([[0],{153:function(e,t,n){},159:function(e,t,n){},162:function(e,t,n){},169:function(e,t){},171:function(e,t){},182:function(e,t){},184:function(e,t){},211:function(e,t){},213:function(e,t){},214:function(e,t){},219:function(e,t){},221:function(e,t){},227:function(e,t){},229:function(e,t){},248:function(e,t){},260:function(e,t){},263:function(e,t){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(58),i=n.n(c),o=(n(153),n(50)),s=n(16),u=n(10),l=n(11),d=n(13),h=n(12),p=n(6),b=n(8),j=n(23),m=n.n(j),f=n(28),g=n(17),O=n(61);function v(e){var t=e.category,n=e.difficulty,a=e.type,r=e.amount,c="amount=".concat(r),i="";""!==t&&(i="&category=".concat(t));var o="";""!==n&&(o="&difficulty=".concat(n));var s="";return""!==a&&(s="&type=".concat(a)),"".concat(c).concat(i).concat(o).concat(s)}function y(e){var t=function(e){for(var t,n,a=e.length;a;t=parseInt(Math.random()*a,10),n=e[a-=1],e[a]=e[t],e[t]=n);return e}(function(e,t){var n=[{answer:e,dataTest:"correct-answer"}],a=t.map((function(e,t){return{answer:e,dataTest:"wrong-answer-".concat(t)}}));return[].concat(n,Object(O.a)(a))}(e.correct_answer,e.incorrect_answers));return Object(g.a)(Object(g.a)({},e),{},{allAnswersRandom:t})}function x(e){var t=e.results.map(y);return Object(g.a)(Object(g.a)({},e),{},{results:t})}function k(e,t){return C.apply(this,arguments)}function C(){return(C=Object(f.a)(m.a.mark((function e(t,n){var a,r,c,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(t),r="&token=".concat(n),c="https://opentdb.com/api.php?".concat(a).concat(r),e.next=5,fetch(c);case 5:return i=e.sent,e.next=8,i.json();case 8:return o=e.sent,e.abrupt("return",x(o));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N="LOGIN",S="GET_TOKEN",w="SAVE",I="SAVE_QUESTIONS",A="UPDATE_SCORE";function T(e){return{type:I,payload:e}}function D(){return function(e){return fetch("https://opentdb.com/api_token.php?command=request").then((function(t){return t.json().then((function(t){return e(function(e){return{type:S,payload:e.token}}(t))}),(function(t){return e(function(e){return{type:"FAILED_REQUEST",payload:e}}(t))}))}))}}n(159);var q=n(1),M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t="1000";this.myInterval=setInterval((function(){var n=e.props,a=n.timer,r=n.timeChange,c=n.stopTimer,i=n.handleClickAnswers;0===a||c?(t="0",i()):r()}),parseInt(t,10))}},{key:"componentWillUnmount",value:function(){clearInterval(this.myInterval)}},{key:"render",value:function(){var e=this.props.timer;return Object(q.jsx)("section",{className:"timerDiv",children:Object(q.jsx)("p",{children:"Tempo: ".concat(e)})})}}]),n}(r.a.Component),B=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={questNumber:0,disableBtn:!1,timer:30,stopTimer:!1},e.encodeUtf8=e.encodeUtf8.bind(Object(b.a)(e)),e.handleClickNext=e.handleClickNext.bind(Object(b.a)(e)),e.handleClickAnswers=e.handleClickAnswers.bind(Object(b.a)(e)),e.timeChange=e.timeChange.bind(Object(b.a)(e)),e.createNextBtn=e.createNextBtn.bind(Object(b.a)(e)),e.saveScore=e.saveScore.bind(Object(b.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.scoreRedux;localStorage.setItem("score","0"),e("0")}},{key:"encodeUtf8",value:function(e){var t={"&quot;":'"',"&#039;":"'","&amp;":"&","&trade;":"\u2122","&Omicron;":"\u03bf","&Sigma;":"\u03c3","&Pi;":"\u03c0","&Nu;":"\u03bd"},n={"&aacute;":"\xe1","&auml;":"\xe4","&aring;":"\xe5","&eacute;":"\xe9","&iacute;":"\xed","&Uuml;":"\xfc","&ouml;":"\xf6"};return unescape(encodeURIComponent(e)).replace(/&(quot|#039|amp|trade|Omicron|Sigma|Pi|Nu);/gi,(function(e){return t[e]})).replace(/&(aacute|auml|aring|eacute|iacute|Uuml|ouml);/gi,(function(e){return n[e]}))}},{key:"handleClickNext",value:function(){var e,t=this.props.questions,n=this.state.questNumber;e=n<t.length?n+1:0,this.setState((function(){return{questNumber:e,disableBtn:!1,timer:30,stopTimer:!1}}))}},{key:"saveScore",value:function(e,t,n){var a=this.props.scoreRedux,r=localStorage.getItem("score");null===r&&(r=Number(n));if("hard"===t){var c=10+3*e;localStorage.setItem("score",c+Number(r))}else if("medium"===t){var i=10+2*e;localStorage.setItem("score",i+Number(r))}else{var o=10+e;localStorage.setItem("score",o+Number(r))}var s=localStorage.getItem("score");a(s);var u=JSON.parse(localStorage.getItem("state"));u.player.assertions+=1,u.player.score=Number(s),localStorage.setItem("state",JSON.stringify(u))}},{key:"handleClickAnswers",value:function(e,t){var n=this.state.timer;this.setState({disableBtn:!0,stopTimer:!0}),"correct-answer"===e&&this.saveScore(n,t)}},{key:"timeChange",value:function(){var e=this.state.timer;this.setState({timer:e-1})}},{key:"createNextBtn",value:function(){var e=this;if(this.state.disableBtn)return Object(q.jsx)("button",{className:"cool",type:"button",onClick:function(){return e.handleClickNext()},"data-testid":"btn-next",children:"PR\xd3XIMA"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.questions,a=t.score,r=this.state,c=r.questNumber,i=r.disableBtn,o=r.timer,s=r.stopTimer;if(n.length>0&&n.length>c){var u=n[c].allAnswersRandom,l=n[c].difficulty;return Object(q.jsxs)("div",{children:[Object(q.jsxs)("h2",{"data-testid":"question-category",children:["Categoria:",n[c].category]}),Object(q.jsx)("h2",{"data-testid":"question-text",children:this.encodeUtf8(n[c].question)}),Object(q.jsx)("section",{className:"answersDiv",children:u.map((function(t,n){return Object(q.jsx)("button",{type:"button","data-testid":t.dataTest,disabled:i,onClick:function(){return e.handleClickAnswers(t.dataTest,l,a)},className:t.dataTest.replace(/-[0-9]/i,""),children:e.encodeUtf8(t.answer)},n)}))}),Object(q.jsx)(M,{timer:o,timeChange:this.timeChange,stopTimer:s,handleClickAnswers:this.handleClickAnswers}),this.createNextBtn()]})}return c>0&&c===n.length?Object(q.jsx)(p.a,{to:"/feedback"}):Object(q.jsx)("span",{children:"Loading"})}}]),n}(r.a.Component);B.defaultProps={questions:[]};var E=Object(s.b)((function(e){return{questions:e.questions.results,score:e.update.score}}),(function(e){return{scoreRedux:function(t){return e(function(e){return{type:A,payload:Number(e)}}(t))}}}))(B),J=(n(162),n(60)),R=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.playerName,a=e.score,r=Object(J.MD5)(t).toString();return Object(q.jsxs)("section",{className:"game-header",children:[Object(q.jsxs)("div",{className:"userInfoDiv",children:[Object(q.jsx)("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(r),alt:"player-img"}),"Jogador:",Object(q.jsx)("span",{"data-testid":"header-player-name",children:n})]}),Object(q.jsxs)("div",{className:"scoreDiv",children:["Pontos:",Object(q.jsx)("span",{"data-testid":"header-score",children:a})]})]})}}]),n}(r.a.Component),F=Object(s.b)((function(e){return{email:e.login.email,playerName:e.login.playerName,score:e.update.score}}),null)(R),_=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.email,n={player:{name:e.playerName,assertions:0,score:e.score,gravatarEmail:t}};localStorage.setItem("state",JSON.stringify(n))}},{key:"render",value:function(){return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(F,{}),Object(q.jsx)("section",{className:"game-question",children:Object(q.jsx)(E,{})})]})}}]),n}(r.a.Component),U=Object(s.b)((function(e){return{email:e.login.email,playerName:e.login.playerName,score:e.update.score}}),null)(_),P=n(44);function L(){return(L=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_category.php");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).handleChange=e.handleChange.bind(Object(b.a)(e)),e.handleSaveConfig=e.handleSaveConfig.bind(Object(b.a)(e)),e.state={categories:[],category:"",difficulty:"",type:"",amount:5},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(){return L.apply(this,arguments)})().then((function(t){var n=[{id:0,name:"Any Category"}].concat(Object(O.a)(t.trivia_categories));e.setState((function(){return{categories:n}}))}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState((function(){return Object(P.a)({},n,a)}))}},{key:"handleSaveConfig",value:function(){var e=this.props,t=e.saveConfigAction,n=e.show,a=this.state,r=a.category,c=a.difficulty,i=a.type,o=a.amount;(""===o||+o<=5)&&(o=5),+o>=50&&(o=50),t({category:r,difficulty:c,type:i,amount:o}),n()}},{key:"render",value:function(){var e=this.state,t=e.categories,n=e.category,a=e.difficulty,r=e.type,c=e.amount;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("h1",{"data-testid":"settings-title",children:"Configura\xe7\xf5es"}),Object(q.jsxs)("label",{htmlFor:"category",children:["Categoria",Object(q.jsx)("select",{name:"category",id:"category",onChange:this.handleChange,value:n,children:t.map((function(e,t){return Object(q.jsx)("option",{value:e.id,children:e.name},t)}))})]}),Object(q.jsxs)("label",{htmlFor:"difficulty",children:["Dificuldade",Object(q.jsxs)("select",{name:"difficulty",id:"difficulty",onChange:this.handleChange,value:a,children:[Object(q.jsx)("option",{value:"any",children:"Any Difficulty"}),Object(q.jsx)("option",{value:"easy",children:"Easy"}),Object(q.jsx)("option",{value:"medium",children:"Medium"}),Object(q.jsx)("option",{value:"hard",children:"Hard"})]})]}),Object(q.jsxs)("label",{htmlFor:"type",children:["Tipo",Object(q.jsxs)("select",{name:"type",id:"type",onChange:this.handleChange,value:r,children:[Object(q.jsx)("option",{value:"",children:"Any Type"}),Object(q.jsx)("option",{value:"multiple",children:"Multiple Choice"}),Object(q.jsx)("option",{value:"boolean",children:"True / False"})]})]}),Object(q.jsxs)("label",{htmlFor:"amount",children:["Quantidade de Perguntas",Object(q.jsx)("input",{type:"number",min:"5",max:"50",name:"amount",id:"amount",value:c,onChange:this.handleChange})]}),Object(q.jsx)("button",{type:"button",onClick:this.handleSaveConfig,className:"cool saveConfig",children:"SALVAR"})]})}}]),n}(r.a.Component),Q=Object(s.b)(null,(function(e){return{saveConfigAction:function(t){return e(function(e){return{type:w,payload:e}}(t))}}}))(G),W=(n(289),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).handleChange=e.handleChange.bind(Object(b.a)(e)),e.handleClick=e.handleClick.bind(Object(b.a)(e)),e.toggleConfig=e.toggleConfig.bind(Object(b.a)(e)),e.state={email:"",playerName:"",disableBtn:!0,showConfig:!1},e}return Object(l.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState((function(){return Object(P.a)({},a,r)}),(function(){t.verifyInputs()}))}},{key:"verifyInputs",value:function(){var e=this.state,t=e.email,n=e.playerName;""!==t&&""!==n?this.setState((function(){return{disableBtn:!1}})):this.setState((function(){return{disableBtn:!0}}))}},{key:"handleClick",value:function(){var e=this.props,t=e.loginAction,n=e.fetchTokenAction,a=e.config,r=e.getQuestionsAction,c=this.state;t({email:c.email,playerName:c.playerName}),n().then((function(e){localStorage.setItem("token",e.payload),r(a,e.payload)}))}},{key:"toggleConfig",value:function(){this.setState((function(e){return{showConfig:!e.showConfig}}))}},{key:"renderLoginInputs",value:function(){var e=this,t=this.props.history,n=this.state,a=n.email,r=n.playerName,c=n.disableBtn;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("label",{htmlFor:"email",children:["Email do Gravatar:",Object(q.jsx)("input",{type:"text",id:"email",value:a,name:"email",onChange:this.handleChange,"data-testid":"input-gravatar-email"})]}),Object(q.jsxs)("label",{htmlFor:"playerName",children:["Nome do Jogador:",Object(q.jsx)("input",{type:"text",id:"playerName",name:"playerName",value:r,onChange:this.handleChange,"data-testid":"input-player-name"})]}),Object(q.jsx)("button",{className:"loginButtons cool",disabled:c,type:"button",onClick:Object(f.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.handleClick();case 2:t.push("/game");case 3:case"end":return n.stop()}}),n)}))),"data-testid":"btn-play",children:"JOGAR!"}),Object(q.jsx)("button",{className:"loginButtons cool",type:"button",onClick:this.toggleConfig,"data-testid":"btn-settings",children:"CONFIG"})]})}},{key:"render",value:function(){var e=this.state.showConfig;return Object(q.jsx)("section",{className:"loginSection",children:e?Object(q.jsx)(Q,{show:this.toggleConfig}):this.renderLoginInputs()})}}]),n}(r.a.Component)),V=Object(s.b)((function(e){return{config:e.config}}),(function(e){return{loginAction:function(t){return e(function(e){var t=e.email,n=e.playerName;return{type:N,payload:{email:t,playerName:n}}}(t))},fetchTokenAction:function(){return e(D())},getQuestionsAction:function(t,n){return e(function(e,t){return function(){var n=Object(f.a)(m.a.mark((function n(a){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k(e,t);case 2:return r=n.sent,n.abrupt("return",a(T(r)));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(W),H=(n(290),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.history.push,t=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return Number(t.score)-Number(e.score)}));return Object(q.jsxs)("section",{className:"rankingDiv",children:[Object(q.jsx)("h1",{"data-testid":"ranking-title",children:"Ranking"}),t.map((function(e,t){return Object(q.jsxs)("div",{className:"rankListDiv",children:[Object(q.jsx)("p",{children:t+1}),Object(q.jsxs)("div",{className:"playerInfoDiv",children:[Object(q.jsx)("img",{src:e.picture,alt:"player-img"}),Object(q.jsx)("p",{"data-testid":"player-name-".concat(t),children:e.name}),Object(q.jsx)("p",{"data-testid":"player-score-".concat(t),children:e.score})]})]},t)})),Object(q.jsx)("button",{"data-testid":"btn-go-home",onClick:function(){return e("/")},type:"button",className:"cool",children:"Home"})]})}}]),n}(r.a.Component)),K=(n(291),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={redirect:!1},e.generateMessage=e.generateMessage.bind(Object(b.a)(e)),e.playAgain=e.playAgain.bind(Object(b.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.email,n=e.playerName,a=e.score,r=Object(J.MD5)(t).toString(),c="https://www.gravatar.com/avatar/".concat(r),i=JSON.parse(localStorage.getItem("ranking"));i||(i=[]),i.push({name:n,score:a,picture:c}),localStorage.setItem("ranking",JSON.stringify(i))}},{key:"playAgain",value:function(){this.setState({redirect:!0})}},{key:"generateMessage",value:function(e){return e<3?"Podia ser melhor...":"Mandou bem!"}},{key:"render",value:function(){var e=this.props.score,t=this.props.history.push,n=JSON.parse(localStorage.getItem("state")).player.assertions;return this.state.redirect?Object(q.jsx)(p.a,{to:"/"}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(F,{}),Object(q.jsxs)("section",{className:"feedbackDiv",children:[Object(q.jsxs)("h4",{children:["Total de acertos:"," ",Object(q.jsx)("span",{"data-testid":"feedback-total-question",children:n})]}),Object(q.jsxs)("h4",{children:["Total de Pontos:"," ",Object(q.jsx)("span",{"data-testid":"feedback-total-score",children:e})]}),Object(q.jsx)("div",{"data-testid":"feedback-text",children:this.generateMessage(n)}),Object(q.jsx)("button",{onClick:this.playAgain,className:"cool","data-testid":"btn-play-again",type:"button",children:"Jogar novamente"}),Object(q.jsx)("button",{type:"button",onClick:function(){return t("/ranking")},"data-testid":"btn-ranking",className:"cool",children:"Ranking"})]})]})}}]),n}(r.a.Component)),X=Object(s.b)((function(e){return{email:e.login.email,playerName:e.login.playerName,score:e.update.score}}),null)(K),$=(n(292),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){localStorage.setItem("ranking",JSON.stringify([]))}},{key:"render",value:function(){return Object(q.jsx)("main",{children:Object(q.jsxs)(p.d,{children:[Object(q.jsx)(p.b,{path:"/ranking",component:H}),Object(q.jsx)(p.b,{path:"/game",component:U}),Object(q.jsx)(p.b,{path:"/feedback",component:X}),Object(q.jsx)(p.b,{path:"/",component:V})]})})}}]),n}(r.a.Component)),z=Object(s.b)(null,null)($);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(34),Z=n(147),ee=n(148),te={email:"",playerName:""};var ne={category:"",difficulty:"",type:"",amount:5};var ae=Object(Y.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case N:return Object(g.a)(Object(g.a)({},e),a);case S:return Object(g.a)(Object(g.a)({},e),{},{token:a});default:return e}},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case w:return Object(g.a)(Object(g.a)({},e),a);default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case I:return Object(g.a)(Object(g.a)({},e),a);default:return e}},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{score:0},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case A:return Object(g.a)(Object(g.a)({},e),{},{score:a});default:return e}}}),re=Object(Y.createStore)(ae,Object(Z.composeWithDevTools)(Object(Y.applyMiddleware)(ee.a)));i.a.render(Object(q.jsx)(o.a,{children:Object(q.jsx)(s.a,{store:re,children:Object(q.jsx)(z,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[293,1,2]]]);
//# sourceMappingURL=main.cbeb473e.chunk.js.map